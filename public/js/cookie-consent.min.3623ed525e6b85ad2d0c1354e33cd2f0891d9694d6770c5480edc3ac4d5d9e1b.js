(()=>{var e=class{constructor(){this.consentKey="cookie_consent_status",this.preferencesKey="cookie_preferences",this.modal=document.getElementById("cookie-consent-modal"),this.banner=document.getElementById("cookie-consent-banner"),this.container=document.querySelector(".cookie-consent-container"),this.hasStoredConsent()||this.showBanner(),this.initElements(),this.initEventListeners(),this.loadPreferences(),typeof Accordion!="undefined"?this.accordion=new Accordion({toggleSelector:".details-toggle",iconSelector:".chevron",onToggle:(e,t)=>{console.debug(`Cookie category ${e.getAttribute("aria-controls")} is now ${t?"expanded":"collapsed"}`)}}):console.warn("Accordion class not found, skipping accordion initialization"),window.openCookieModal=()=>this.openModal(),window.closeCookieModal=()=>this.closeModal()}initElements(){this.tabs=document.querySelectorAll(".tab-button"),this.tabPanes=document.querySelectorAll(".tab-pane"),this.rejectOptionalBtns=document.querySelectorAll('[data-action="reject-optional"]'),this.customizeBtns=document.querySelectorAll('[data-action="customize"]'),this.acceptAllBtns=document.querySelectorAll('[data-action="accept-all"]'),this.savePreferencesBtn=document.querySelector('[data-action="save-preferences"]'),this.cookieToggles={analytics:document.getElementById("analytics-cookies"),profiling:document.getElementById("profiling-cookies"),social:document.getElementById("social-cookies")},this.detailsToggles=document.querySelectorAll(".details-toggle"),document.documentElement.lang=document.documentElement.lang||"en",this.bannerButtons={rejectOptional:this.banner?.querySelector('[data-action="reject-optional"]'),customize:this.banner?.querySelector('[data-action="customize"]'),acceptAll:this.banner?.querySelector('[data-action="accept-all"]')}}initEventListeners(){this.tabs.forEach(e=>{e.addEventListener("click",()=>{const t=e.getAttribute("data-tab");this.switchTab(t)})}),this.rejectOptionalBtns.forEach(e=>e.addEventListener("click",()=>this.rejectOptional())),this.customizeBtns.forEach(e=>e.addEventListener("click",()=>this.customize(e))),this.acceptAllBtns.forEach(e=>e.addEventListener("click",()=>this.acceptAll())),this.savePreferencesBtn?.addEventListener("click",()=>this.savePreferences()),this.modal.addEventListener("click",e=>{e.target===this.modal&&this.closeModal()}),this.bannerButtons.rejectOptional?.addEventListener("click",()=>this.rejectOptional()),this.bannerButtons.customize?.addEventListener("click",()=>{this.hideBanner(),this.openModal(),this.switchTab("details")}),this.bannerButtons.acceptAll?.addEventListener("click",()=>this.acceptAll()),this.tabs.forEach(e=>{e.addEventListener("click",()=>{const t=e.getAttribute("data-tab");this.switchTab(t),t==="details"?this.container.classList.add("details-active"):this.container.classList.remove("details-active")})})}showBanner(){this.banner&&this.banner.classList.add("show")}hideBanner(){this.banner&&this.banner.classList.remove("show")}switchTab(e){this.tabs.forEach(e=>e.classList.remove("active")),this.tabPanes.forEach(e=>e.classList.remove("active")),document.querySelector(`[data-tab="${e}"]`).classList.add("active"),document.getElementById(`${e}-tab`).classList.add("active"),e==="details"?(this.savePreferencesBtn.style.display="inline-block",this.customizeBtns.forEach(e=>{e.getAttribute("data-target-tab")==="details"&&(e.style.display="none")}),this.container.classList.add("details-active")):(this.savePreferencesBtn.style.display="none",this.customizeBtns.forEach(e=>{e.style.display="inline-block"}),this.container.classList.remove("details-active"))}rejectOptional(){Object.values(this.cookieToggles).forEach(e=>{e&&(e.checked=!1)}),this.savePreferences(),this.closeModal(),this.hideBanner()}customize(e){const t=e.getAttribute("data-target-tab");t&&this.switchTab(t)}acceptAll(){Object.values(this.cookieToggles).forEach(e=>{e&&(e.checked=!0)}),this.savePreferences(),this.closeModal(),this.hideBanner()}savePreferences(){const e={analytics:this.cookieToggles.analytics?.checked||!1,profiling:this.cookieToggles.profiling?.checked||!1,social:this.cookieToggles.social?.checked||!1};localStorage.setItem(this.consentKey,"custom"),localStorage.setItem(this.preferencesKey,JSON.stringify(e)),this.applyPreferences(e),this.closeModal()}loadPreferences(){const e=JSON.parse(localStorage.getItem(this.preferencesKey)||"{}");Object.entries(this.cookieToggles).forEach(([t,n])=>{n&&(n.checked=e[t]||!1)}),this.applyPreferences(e)}checkConsentStatus(){const e=localStorage.getItem(this.consentKey);e?this.loadPreferences():this.showBanner()}showBanner(){this.banner&&this.banner.classList.add("show")}hideBanner(){this.banner&&this.banner.classList.remove("show")}openPreferences(){this.hideBanner(),this.modal&&(this.modal.classList.remove("hidden"),this.loadPreferences())}closePreferences(){this.modal&&this.modal.classList.add("hidden")}applyPreferences(e){e.analytics?this.enableAnalytics():this.disableAnalytics(),e.profiling?this.enableProfiling():this.disableProfiling(),e.social?this.enableSocial():this.disableSocial()}enableAnalytics(){if(!document.querySelector('script[data-website-id="40d83e8d-a45a-43d8-b9c8-db93176c0420"]')&&window.location.hostname!=="localhost"){const e=document.createElement("script");e.setAttribute("async",""),e.setAttribute("defer",""),e.setAttribute("data-website-id","40d83e8d-a45a-43d8-b9c8-db93176c0420"),e.setAttribute("src","https://cloud.umami.is/script.js"),document.head.appendChild(e);const t=new Date;t.setFullYear(t.getFullYear()+1),document.cookie=`umami.uuid=${this.generateUUID()}; expires=${t.toUTCString()}; path=/; SameSite=Lax`}if(!document.querySelector('script[data-key="WVZPgYoen8uQz3GD87Degg"]')&&window.location.hostname!=="localhost"){const e=document.createElement("script");e.setAttribute("async",""),e.setAttribute("src","https://analytics.ahrefs.com/analytics.js"),e.setAttribute("data-key","WVZPgYoen8uQz3GD87Degg"),document.head.appendChild(e)}}disableAnalytics(){const e=document.querySelector('script[data-website-id="40d83e8d-a45a-43d8-b9c8-db93176c0420"]');e&&e.remove(),document.cookie="umami.uuid=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/; SameSite=Lax";const t=document.querySelector('script[data-key="WVZPgYoen8uQz3GD87Degg"]');t&&t.remove();try{window._umamiSettings&&(window._umamiSettings=void 0),window.ahrefs&&(window.ahrefs=void 0)}catch(e){console.warn("Error cleaning up analytics objects:",e)}}generateUUID(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=Math.random()*16|0,n=e==="x"?t:t&3|8;return n.toString(16)})}enableProfiling(){const e=async()=>{try{if(!document.querySelector('script[src*="calendly"]')){const e=document.createElement("script");e.setAttribute("type","text/javascript"),e.setAttribute("src","https://assets.calendly.com/assets/external/widget.js"),await new Promise((t,n)=>{e.onload=()=>{if(window.Calendly){const e=document.querySelectorAll(".calendly-inline-widget");e.forEach(e=>{e.style.display="block",window.Calendly.initInlineWidget({url:e.getAttribute("data-url"),parentElement:e})}),t()}else n(new Error("Calendly not properly initialized"))},e.onerror=()=>n(new Error("Failed to load Calendly")),document.head.appendChild(e)})}if(!document.querySelector('script[src*="kit"]')){const e=document.createElement("script");e.setAttribute("type","text/javascript"),e.setAttribute("src","https://js.kit.co/v1/kit.js"),await new Promise((t,n)=>{e.onload=t,e.onerror=()=>n(new Error("Failed to load Kit")),document.head.appendChild(e)})}}catch(e){throw console.error("Error loading profiling scripts:",e),e}},t=async(t=3)=>{for(let n=0;n<t;n++)try{await e(),console.log("All profiling scripts loaded successfully");break}catch(e){n===t-1?console.error("Failed to load scripts after",t,"attempts:",e):(console.warn("Retry attempt",n+1,"of",t),await new Promise(e=>setTimeout(e,1e3*(n+1))))}};t()}disableProfiling(){const e=e=>{const t=document.querySelector(e);t&&t.remove()};e('script[src*="calendly"]'),e('script[src*="kit"]');const t=document.querySelectorAll(".calendly-inline-widget");t.forEach(e=>{e.style.display="none"});try{window.Calendly&&(window.Calendly=void 0),window.Kit&&(window.Kit=void 0)}catch(e){console.warn("Error cleaning up profiling objects:",e)}}enableSocial(){document.querySelectorAll(".bluesky-embed").forEach(e=>{e.style.display="block"})}disableSocial(){document.querySelectorAll(".bluesky-embed").forEach(e=>{e.style.display="none"})}openModal(e={}){if(this.modal){this.modal.classList.add("active"),document.body.classList.add("scroll-lock"),document.body.style.overflow="hidden";const t=e.defaultTab||"consent";this.switchTab(t)}}closeModal(){this.modal&&(this.modal.classList.remove("active"),document.body.classList.remove("scroll-lock"),document.body.style.overflow="")}hasStoredConsent(){return localStorage.getItem(this.consentKey)!==null}};document.addEventListener("DOMContentLoaded",function(){const t=new e;document.querySelectorAll("[data-open-cookie-settings]").forEach(e=>{e.addEventListener("click",()=>{t.openModal({defaultTab:"details"})})}),this.bannerButtons.customize?.addEventListener("click",()=>{this.hideBanner(),this.openModal({defaultTab:"details"})}),document.getElementById("cookie-consent-modal")?.addEventListener("click",function(e){e.target===this&&t.closeModal()})})})()