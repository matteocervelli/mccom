let currentGalleryIndex=0,allImages=[];const galleryImages=JSON.parse(document.getElementById("gallery-lightbox").dataset.gallery);document.addEventListener("DOMContentLoaded",function(){const e=document.querySelectorAll(".project-main img");e.forEach(e=>{e.classList.add("lightbox-trigger"),e.dataset.action="open",e.dataset.caption=e.alt||"";const t=document.createElement("div");t.className="content-image-wrapper",e.parentNode.insertBefore(t,e),t.appendChild(e)}),allImages=[...e,...document.querySelectorAll(".gallery-item img")].map(e=>({src:e.src,alt:e.alt,caption:e.dataset.caption})),document.querySelectorAll('[data-action="open"]').forEach((e)=>{e.addEventListener("click",function(e){e.preventDefault(),openGalleryLightbox(this,allImages.findIndex(e=>e.src===this.src))})}),document.querySelectorAll('[data-action="jump"]').forEach(e=>{e.addEventListener("click",function(){jumpToImage(parseInt(this.dataset.index))})})});function openGalleryLightbox(e,t){event.stopPropagation();const n=document.getElementById("gallery-lightbox"),s=n.querySelector(".lightbox-content img"),o=n.querySelector(".lightbox-title"),i=n.querySelector(".lightbox-description");currentGalleryIndex=t,updateLightboxImage(),n.style.display="flex",document.body.style.overflow="hidden",highlightCurrentThumbnail()}function closeGalleryLightbox(){const e=document.getElementById("gallery-lightbox");e.style.display="none",document.body.style.overflow="auto"}function changeGalleryImage(e){event.stopPropagation(),currentGalleryIndex=(currentGalleryIndex+e+galleryImages.length)%galleryImages.length,updateLightboxImage(),highlightCurrentThumbnail()}function jumpToImage(e){event.stopPropagation(),currentGalleryIndex=e,updateLightboxImage(),highlightCurrentThumbnail()}function updateLightboxImage(){const e=document.getElementById("gallery-lightbox"),n=e.querySelector(".lightbox-content img"),s=e.querySelector(".lightbox-title"),o=e.querySelector(".lightbox-description"),t=allImages[currentGalleryIndex];n.src=t.src,s.textContent=t.alt,o.textContent=t.caption}function highlightCurrentThumbnail(){const e=document.querySelectorAll(".thumbnail");e.forEach((e,t)=>{e.classList.toggle("active",t===currentGalleryIndex)})}document.addEventListener("keydown",function(e){document.getElementById("gallery-lightbox").style.display==="flex"&&(e.key==="Escape"&&closeGalleryLightbox(),e.key==="ArrowLeft"&&changeGalleryImage(-1),e.key==="ArrowRight"&&changeGalleryImage(1))})