document.addEventListener("DOMContentLoaded",function(){const n=document.querySelectorAll(".footnote-ref");let e;const t=document.querySelector(".footnotes");if(t){const s=document.documentElement.lang,o=s==="it"?"Note a piè di pagina":"Footnotes",e=document.createElement("h2");e.textContent=o,e.className="footnotes-title";const n=t.querySelector("hr");n&&n.after(e)}document.querySelectorAll(".footnotes li").forEach(e=>{e.querySelectorAll(".footnote-backref").forEach(e=>e.remove());const o=e.id,s=`fnref:${o.replace("fn:","")}`,i=e.firstChild.textContent.trim(),n=document.createElement("a");n.href=`#${s}`,n.className="footnote-number-link",n.textContent=i,e.replaceChild(n,e.firstChild);const t=document.createElement("a");t.href=`#${s}`,t.className="footnote-backref",t.innerHTML="↩",t.title="Torna al testo",e.appendChild(t)}),n.forEach(t=>{t.addEventListener("mouseenter",function(){const s=this.getAttribute("href").substring(1),n=document.getElementById(s);if(!n)return;e=setTimeout(()=>{const e=document.createElement("div");e.className="footnote-tooltip";const t=n.cloneNode(!0);t.querySelectorAll(".footnote-backref").forEach(e=>e.remove()),e.innerHTML=t.innerHTML;const s=this.getBoundingClientRect();e.style.left=`${s.left}px`,e.style.top=`${s.top-10}px`,document.body.appendChild(e),setTimeout(()=>e.classList.add("show"),10)},1e3)}),t.addEventListener("mouseleave",function(){clearTimeout(e);const t=document.querySelector(".footnote-tooltip");t&&(t.classList.remove("show"),setTimeout(()=>t.remove(),200))})})})